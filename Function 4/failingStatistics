#include <stdio.h>
#include <stdbool.h>

typedef struct{
    int id;
    char name[50];
    float grades[6];
}Student;

void failingStatistics(Student student[], int count);

int main(){ 

Student student[] = {
    {1001, "Fandy", {85.5, 45.0, 78.0, 92.0, 56.5, 20.0}},
    {1002, "Nathan Chang", {62.0, 59.0, 71.0, 88.0, 60.0, 80.5}},
    {1003, "Lance Varrel", {95.0, 87.0, 92.0, 89.0, 91.0, 22.5}}};
                
    int studentCount = sizeof(student) / sizeof(student[0]);

    failingStatistics(student, studentCount);
    return 0;
}

void failingStatistics(Student student[], int studentCount){
    printf("Failing statistics:\n");
    bool anyStudentFailed = false;
    int subjectCount = sizeof(student[0].grades) / sizeof(student[0].grades[0]);

    for(int i = 0; i < studentCount ; i++){

        int failCount = 0;
        int failedSubjectNum[5] = {0};
        float failedSubjectGrade[5] = {0};

        for(int j=0; j < subjectCount ; j++){
            if(student[i].grades[j] <60.0){
                failedSubjectNum[failCount] = j + 1;
                failedSubjectGrade[failCount] = student[i].grades[j];
                failCount++;}
        }

        if(failCount > 0){
            anyStudentFailed = true;
            printf("\n%s (ID: %d) failed %d subjects\n", student[i].name, student[i].id, failCount);
            for(int k = 0; k < failCount; k++){
                printf("Subject %d: %.1f\n", failedSubjectNum[k], failedSubjectGrade[k]);
            }
        }
        

        
    }

    if(anyStudentFailed == false){
            printf("No students failed.");
        }

}
